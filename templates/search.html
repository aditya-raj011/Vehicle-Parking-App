<!DOCTYPE html>
<html lang="en">

<head>
    <title>Search</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <div id="main">
        <div id="canvas" class="overflow-auto">
            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">Welcome {{ this_user.full_name }}</a>
                    <div class="collapse navbar-collapse" id="navbarAdmin">
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="/users">Users</a></li>
                        </ul>
                        <form class="d-flex">
                            <input class="form-control me-2" type="search" placeholder="Search">
                            <button class="btn btn-outline-dark" type="submit">Search</button>
                        </form>
                        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                            <li class="nav-item"><a class="nav-link" href="/summary">Summary</a></li>
                            <li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>
                            <li class="nav-item"><a class="nav-link" href="#">Edit Profile</a></li>
                        </ul>
                    </div>
                </div>
            </nav>

            <div id="form-body" class="mt-4 text-center">
                <form action="/search" method="get" class="d-flex justify-content-center">
                    <select class="form-select w-25 mx-2" name="filter_by">
                        <option value="user_id">User ID</option>
                        <option value="spot_id">Parking Spot by location</option>
                    </select>
                    <input class="form-control w-25 mx-2" type="text" name="query" placeholder="search string">
                    <button class="btn btn-primary" type="submit">Search</button>
                </form>

                {% if search_title %}
                <div class="border border-primary rounded-pill py-1 px-3 d-inline-block my-4">
                    <h5 class="text-primary mb-0">search: {{ search_title }}</h5>
                </div>
                {% endif %}


                {% if lots %}
                <div class="d-flex flex-wrap justify-content-center">
                    {% for lot in lots %}
                    <div class="lot-box">
                        <h6 class="fw-bold">Parking#{{ lot.id }}</h6>
                        <a href="/edit_lot/{{ lot.id }}">Edit</a> |
                        <a href="/delete_lot/{{ lot.id }}">Delete</a>
                        <p class="text-success">Occupied: {{ lot.occupied }}/{{ lot.max_spots }}</p>

                        <div class="d-flex flex-wrap justify-content-center">
                            {% for spot in lot.spots %}
                            {% if spot.status == 'A' %}
                            <div class="m-1 px-3 py-2 bg-success text-white rounded">A</div>
                            {% else %}
                            <div class="m-1 px-3 py-2 bg-danger text-white rounded">O</div>
                            {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% elif searched %}
                <p class="mt-4 text-danger">No results found.</p>
                {% endif %}
            </div>


        </div>

    </div>
</body>

</html>